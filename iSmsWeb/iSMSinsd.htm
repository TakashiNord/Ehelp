<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1251">
<meta name=Generator content="Microsoft Word 14 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Courier;
	panose-1:2 7 4 9 2 2 5 2 4 4;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoCommentText, li.MsoCommentText, div.MsoCommentText
	{mso-style-link:"Текст примечания Знак";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	font-size:10.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoCommentSubject, li.MsoCommentSubject, div.MsoCommentSubject
	{mso-style-link:"Тема примечания Знак";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	font-size:10.0pt;
	font-family:"Calibri","sans-serif";
	font-weight:bold;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Текст выноски Знак";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:36.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:36.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
span.a
	{mso-style-name:"Текст примечания Знак";
	mso-style-link:"Текст примечания";}
span.a0
	{mso-style-name:"Тема примечания Знак";
	mso-style-link:"Тема примечания";
	font-weight:bold;}
span.a1
	{mso-style-name:"Текст выноски Знак";
	mso-style-link:"Текст выноски";
	font-family:"Tahoma","sans-serif";}
.MsoChpDefault
	{font-family:"Calibri","sans-serif";}
.MsoPapDefault
	{margin-bottom:10.0pt;
	line-height:115%;}
@page WordSection1
	{size:595.3pt 841.9pt;
	margin:2.0cm 42.5pt 2.0cm 3.0cm;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=RU>

<div class=WordSection1>

<p class=MsoNormal style='margin-bottom:12.0pt;line-height:normal'><span
style='font-size:16.0pt'>Подготовка к созданию пакетов</span></p>

<p class=MsoListParagraphCxSpFirst style='margin-top:0cm;margin-right:0cm;
margin-bottom:0cm;margin-left:18.0pt;margin-bottom:.0001pt;text-indent:-18.0pt;
line-height:normal'>1)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Установить checkinstall версии не ниже 1.6.2 (текущая версия содержит
ошибку, для её исправление см. Приложение)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0cm;margin-right:0cm;
margin-bottom:0cm;margin-left:18.0pt;margin-bottom:.0001pt;text-indent:-18.0pt;
line-height:normal'>2)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Установить клиент <span lang=EN-US>git</span><span lang=EN-US> </span>версии
не ниже 2.1.0</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0cm;margin-right:0cm;
margin-bottom:0cm;margin-left:18.0pt;margin-bottom:.0001pt;text-indent:-18.0pt;
line-height:normal'>3)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Скопировать файл дампа базы данных на целевую систему. Если файл
отсутствует, его можно создать на любом компьютере, где есть рабочая БД с
помощью команды:</p>

<p class=MsoListParagraph style='margin-top:6.0pt;margin-right:0cm;margin-bottom:
6.0pt;margin-left:17.85pt;line-height:normal'><span lang=EN-US
style='font-family:"Courier New"'>mysqldump -h 127.0.0.1 -u rsduadmin -ppassme
rsduadmin --complete-insert --extended-insert --disable-keys --lock-all-tables
--create-options --add-drop-database &gt; ./rsduadmin.sql</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0cm;margin-right:0cm;
margin-bottom:0cm;margin-left:18.0pt;margin-bottom:.0001pt;text-indent:-18.0pt;
line-height:normal'>4)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Собрать серверное ПО, обязательно выполнив команду создания дистрибутива:</p>

<p class=MsoListParagraph style='margin-top:6.0pt;margin-right:0cm;margin-bottom:
6.0pt;margin-left:17.85pt;line-height:normal'><span style='font-family:Courier'>make
dist</span></p>

<p class=MsoListParagraphCxSpLast style='margin-top:0cm;margin-right:0cm;
margin-bottom:0cm;margin-left:18.0pt;margin-bottom:.0001pt;line-height:normal'>В
результате выполнения команды должен быть создан файл <b>.svnrevision</b></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'>&nbsp;</p>

<p class=MsoNormal style='margin-bottom:12.0pt;line-height:normal'><span
style='font-size:16.0pt'>Сборка пакетов</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'>Запустить скрипт <span lang=EN-US>make</span>_<span lang=EN-US>package</span>.<span
lang=EN-US>sh</span><span lang=EN-US> </span>с правами пользователя root, обязательно
указав два параметра, используя абсолютные пути:</p>

<p class=MsoListParagraphCxSpFirst style='margin-top:0cm;margin-right:0cm;
margin-bottom:0cm;margin-left:18.0pt;margin-bottom:.0001pt;text-indent:-18.0pt;
line-height:normal'>1)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>путь к файлу дампа конфиигурационной БД <span lang=EN-US>iSMS</span>;</p>

<p class=MsoListParagraphCxSpLast style='margin-top:0cm;margin-right:0cm;
margin-bottom:0cm;margin-left:18.0pt;margin-bottom:.0001pt;text-indent:-18.0pt;
line-height:normal'>2)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>путь до директории, содержащей собранное серверное ПО <span lang=EN-US>iSMS</span>.</p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:0cm;
margin-left:0cm;margin-bottom:.0001pt;line-height:normal'>Например<span
lang=EN-US>,</span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;line-height:normal'><span lang=EN-US style='font-family:Courier'>sudo
/root/Trunk/Scripts/make_package.sh /root/rsduadmin.sql /root/Trunk</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><b><i>Примечание</i></b>. Во время выполнения скрипта на этапе сборки
www пакета будет запрошен пароль для доступа к git.</p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'>&nbsp;</p>

<p class=MsoNormal style='margin-bottom:12.0pt;line-height:normal'><span
style='font-size:16.0pt'>Результат выполнения сборки пакетов</span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;line-height:normal'>Результатом сборки будут 4 <span
lang=EN-US>deb</span><span lang=EN-US> </span>пакета:</p>

<p class=MsoListParagraphCxSpFirst style='margin-top:6.0pt;margin-right:0cm;
margin-bottom:6.0pt;margin-left:36.0pt;text-indent:-18.0pt;line-height:normal'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>isms-db_1-<span lang=EN-US>&lt;timestamp&gt;</span>_all.deb</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:6.0pt;margin-right:0cm;
margin-bottom:6.0pt;margin-left:36.0pt;text-indent:-18.0pt;line-height:normal'><span
lang=EN-US style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>isms-ntp_1-&lt;timestamp&gt;_all.deb</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:6.0pt;margin-right:0cm;
margin-bottom:6.0pt;margin-left:36.0pt;text-indent:-18.0pt;line-height:normal'><span
lang=EN-US style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>isms-server_&lt;revision&gt;-&lt;timestamp&gt;_i386.deb             </span></p>

<p class=MsoListParagraphCxSpLast style='margin-top:6.0pt;margin-right:0cm;
margin-bottom:6.0pt;margin-left:36.0pt;text-indent:-18.0pt;line-height:normal'><span
lang=EN-US style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>isms-web_1-&lt;timestamp&gt;_all.deb</span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;line-height:normal'><span style='font-size:16.0pt'>Описание
пакетов</span></p>

<p class=MsoListParagraphCxSpFirst style='margin-top:6.0pt;margin-right:0cm;
margin-bottom:6.0pt;margin-left:36.0pt;text-indent:-18.0pt;line-height:normal'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>isms-db – пакет устанавливает шаблонную базу данных, создает
пользователей для <span lang=EN-US>WEB</span>-приложения и серверных модулей, а
также выполняет настройку параметров в БД (устанавливает актуальные <span
lang=EN-US>IP</span><span lang=EN-US> </span>адреса хостов и параметры для
настройки репликации между узлами <span lang=EN-US>iSMS</span><span lang=EN-US>
</span>– параметр <span lang=EN-US>MASTER</span>_<span lang=EN-US>HOST</span><span
lang=EN-US> </span>приложения <span lang=EN-US>bridged</span>);</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:6.0pt;margin-right:0cm;
margin-bottom:6.0pt;margin-left:36.0pt;text-indent:-18.0pt;line-height:normal'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>isms</span>-<span lang=EN-US>ntp</span> – пакет
применяется для настройки <span lang=EN-US>NTP</span><span lang=EN-US> </span>сервиса;
прописывается указанный <span lang=EN-US>IP</span>-адрес/адреса серверов
точного времени;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:6.0pt;margin-right:0cm;
margin-bottom:6.0pt;margin-left:36.0pt;text-indent:-18.0pt;line-height:normal'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>isms</span>-<span lang=EN-US>server</span> – пакет
устанавливает серверные модули и стандартные конфигурационные файлы; в случае
если серверные модули запущены, выводится предупреждающее сообщение и работа
пакета прерывается.</p>

<p class=MsoListParagraphCxSpLast style='margin-top:6.0pt;margin-right:0cm;
margin-bottom:6.0pt;margin-left:36.0pt;text-indent:-18.0pt;line-height:normal'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>isms</span>-<span lang=EN-US>web</span> – пакет устанавливает
<span lang=EN-US>WEB</span>-приложения <span lang=EN-US>iSMS</span>,
редактирует <span lang=EN-US>php</span>.<span lang=EN-US>ini</span> и выполняет
конфигурацию сервера <span lang=EN-US>Apache</span>.</p>

<span style='font-size:16.0pt;line-height:115%;font-family:"Calibri","sans-serif"'><br
clear=all style='page-break-before:always'>
</span>

<p class=MsoNormal><span style='font-size:16.0pt;line-height:115%'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:12.0pt;line-height:normal'><span
style='font-size:16.0pt'>Приложение</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'>В версии утилиты <span lang=EN-US>checkinstall</span><span lang=EN-US> </span>ниже
1.6.2 содержится ошибка. Чтобы ошибку исправиь, необходимо заменить в файле 
/usr/bin/checkinstall следующие строки.</p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'>&nbsp;</p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:Courier'>find -L $BUILD_DIR/etc
-type f 2&gt; /dev/null | sed -e &quot;s,$BUILD_DIR,,&quot; | </span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:Courier'>\</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:Courier'>         &gt;
$BUILD_DIR/DEBIAN/conffiles</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span style='font-family:Courier'>на</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:Courier'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:Courier'>find -L $BUILD_DIR/etc
-type f 2&gt; /dev/null | sed -e &quot;s,$BUILD_DIR,,&quot; \</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:Courier'>         </span><span
style='font-family:Courier'>&gt; $BUILD_DIR/DEBIAN/conffiles</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'>&nbsp;</p>

</div>

</body>

</html>
